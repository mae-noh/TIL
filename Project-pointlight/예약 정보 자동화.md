# 예약 카카오톡 알림 메시지 자동화

## 예약 정보 자동화

## Needs

```
현정씨는 공간을 빌려주는 호스트.
공간 사용을 원하는 사용자가 Space Cloud에서 현정씨의 공간을 예약하면
예약완료 정보가 카카오톡과 이메일로 전송되며
그 정보를 기반으로 스프레드시트에 정리하고, 예약 당일 오전에 예약과 관련된 카카오톡을 전송함.
현정씨의 경우 현재 본업이 있고, 공간 예약의 경우 부업이기때문에
예약자가 많아지면서 카카오톡 예약 알림 메시지 전송 작업을 자동화하고 싶음.
```

## TODO

### 1. 이메일 데이터 크롤링

```
카카오톡의 경우, 개인정보 보호에 의하여 수신 API는 제공하고 있지 않음.
따라서 이메일을 크롤링하여 데이터를 가져오는 것을 선택.
```

#### 1-1. 크롤링 주기

- 1시간에 1번씩
- 안읽은 메일만 가져온다.
또는? 누락이 있을 수 있으므로 배치를 도는 시점의 날의 전체 메일을 읽어서 전체를 갱신한다.

### 2. 데이터 파싱

```
구글 스프레드 시트 Write API를 이용하여
이메일 데이터에서 필요한 정보를 파싱해서 스프레드 시트에 저장.
```

#### 2-1. 이메일 body

- 이메일에 형식이 고정되어있다고 가정 후, 파싱 작업.
- 추후에 형식이 변경되면 파싱이 잘못될 수 있어 파싱 코드 추가작업 필요.
- 전체 예약정보를 관리하는 스프레드 시트와 날짜별로 관리할 수 있는 시트가 있으면 좋을 것 같음
- 스프레드시트 말고 웹으로 보여주면 좋을것 같은데ㅠ..
검색 기능, 데이터 입력 기능, 메신저 미리보기 기능, 메신저 전송 기능.
갱신 주기는 1시간이지만, 갱신버튼을 만들어서 클릭시 갱신도 가능해.
- 필요한 컬럼이 늘어날 수 있음.
NoSQL이 좋지 않을까?..

#### 2-2. 링크

- **전화번호 파싱**

### 전송 전 카카오톡에 전송될 목록과 메시지를 관리자가 미리 확인 가능해야함

```
카카오톡 발송 전, 관리자가 당일 발송에 대한 목록 및 메시지를 확인 가능해야함.
예를 들어 오전 9시 발송인 경우, 당일 0시에 리스트업 메일을 받을 수 있도록?
```

### 3. 커스텀 메시지

```
구글 스프레드 시트 Read API를 이용하여 알맞는 정보에 따라 카카오톡 메시지를 만듦.
```

### 4. 카카오톡 API

```
기존 카카오톡의 경우, 전화번호만 가지고 전송할 수 없음.
알림톡은 전화번호만으로 가능.
```

### 서버를 어떻게 띄울 것인가?...

추후에 고민해보자. 일단 만들고나서 띄우면 되니깐!..
